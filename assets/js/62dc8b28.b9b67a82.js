"use strict";(self.webpackChunkeLMS_documentation=self.webpackChunkeLMS_documentation||[]).push([[6920],{2857:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"setup-firebase-auth","title":"Firebase Auth","description":"This guide mirrors the structure of our other mobile setup docs. It walks through the Firebase Console work plus the exact locations for the generated configuration files inside the Android and iOS projects. Follow it whenever you onboard a new Firebase project or rotate credentials.","source":"@site/mobile-app/setup-firebase-auth.md","sourceDirName":".","slug":"/setup-firebase-auth","permalink":"/mobile-app/setup-firebase-auth","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"mobileAppSidebar","previous":{"title":"Integrate with Firebase","permalink":"/mobile-app/integrate-firebase"},"next":{"title":"Change App Theme","permalink":"/mobile-app/change-app-theme"}}');var r=i(4848),t=i(8453);const l={sidebar_position:5},o="Firebase Auth",d={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Firebase Console Configuration",id:"firebase-console-configuration",level:2},{value:"Step 1: Enable Authentication Providers",id:"step-1-enable-authentication-providers",level:3},{value:"Step 2: Gather Identifiers &amp; Fingerprints",id:"step-2-gather-identifiers--fingerprints",level:3},{value:"Step 3: Download Config Files",id:"step-3-download-config-files",level:3},{value:"Android Native Configuration",id:"android-native-configuration",level:2},{value:"Step 4: Place <code>google-services.json</code>",id:"step-4-place-google-servicesjson",level:3},{value:"iOS Native Configuration",id:"ios-native-configuration",level:2},{value:"Step 5: Add <code>GoogleService-Info.plist</code> to Runner",id:"step-5-add-googleservice-infoplist-to-runner",level:3},{value:"Step 6: Register the Reversed Client ID (Google Sign-In)",id:"step-6-register-the-reversed-client-id-google-sign-in",level:3},{value:"Step 7: Enable Apple Sign-In Capability",id:"step-7-enable-apple-sign-in-capability",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"firebase-auth",children:"Firebase Auth"})}),"\n",(0,r.jsx)(n.p,{children:"This guide mirrors the structure of our other mobile setup docs. It walks through the Firebase Console work plus the exact locations for the generated configuration files inside the Android and iOS projects. Follow it whenever you onboard a new Firebase project or rotate credentials."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Access to the Firebase Console project used by ELMS."}),"\n",(0,r.jsx)(n.li,{children:"Local copies of the Flutter source code (Android and iOS folders included)."}),"\n",(0,r.jsx)(n.li,{children:"Android Studio / Xcode installed for editing native files."}),"\n",(0,r.jsx)(n.li,{children:"Apple Developer access for the bundle ID that ships with the app."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"firebase-console-configuration",children:"Firebase Console Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-enable-authentication-providers",children:"Step 1: Enable Authentication Providers"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.strong,{children:"Firebase Console \u2192 Build \u2192 Authentication"})," and click ",(0,r.jsx)(n.strong,{children:"Get started"})," if prompted."]}),"\n",(0,r.jsxs)(n.li,{children:["Under ",(0,r.jsx)(n.strong,{children:"Sign-in method"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Email/Password"})," \u2192 toggle ",(0,r.jsx)(n.strong,{children:"Enable"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Save"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Phone"})," \u2192 toggle ",(0,r.jsx)(n.strong,{children:"Enable"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Save"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Google"})," \u2192 toggle ",(0,r.jsx)(n.strong,{children:"Enable"}),", pick a ",(0,r.jsx)(n.strong,{children:"Project support email"}),", then ",(0,r.jsx)(n.strong,{children:"Save"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Apple"})," (iOS only) \u2192 toggle ",(0,r.jsx)(n.strong,{children:"Enable"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Save"}),". Ensure your Apple Developer account already owns the bundle ID with \u201cSign in with Apple\u201d capability."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-gather-identifiers--fingerprints",children:"Step 2: Gather Identifiers & Fingerprints"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Platform"}),(0,r.jsx)(n.th,{children:"Required value"}),(0,r.jsx)(n.th,{children:"Where to find it"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Android"}),(0,r.jsxs)(n.td,{children:["Package name (",(0,r.jsx)(n.code,{children:"applicationId"}),")"]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"android/app/build.gradle"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Android"}),(0,r.jsx)(n.td,{children:"SHA-1 & SHA-256 fingerprints (debug + release)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"keytool -list -v -keystore ..."})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"iOS"}),(0,r.jsx)(n.td,{children:"Bundle ID"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"ios/Runner.xcodeproj"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Runner"})," target \u2192 ",(0,r.jsx)(n.strong,{children:"General"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"iOS"}),(0,r.jsx)(n.td,{children:"Apple Team ID"}),(0,r.jsx)(n.td,{children:"developer.apple.com/account"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Add these items under ",(0,r.jsx)(n.strong,{children:"Project settings \u2192 Your apps"})," before downloading any configuration files."]}),"\n",(0,r.jsx)(n.h3,{id:"step-3-download-config-files",children:"Step 3: Download Config Files"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Still in ",(0,r.jsx)(n.strong,{children:"Project settings \u2192 Your apps"}),", select the Android app \u2192 click ",(0,r.jsxs)(n.strong,{children:["Download ",(0,r.jsx)(n.code,{children:"google-services.json"})]}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Select the iOS app \u2192 click ",(0,r.jsxs)(n.strong,{children:["Download ",(0,r.jsx)(n.code,{children:"GoogleService-Info.plist"})]}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Repeat this download any time you change SHA fingerprints (Android) or bundle identifiers (iOS)."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"android-native-configuration",children:"Android Native Configuration"}),"\n",(0,r.jsxs)(n.h3,{id:"step-4-place-google-servicesjson",children:["Step 4: Place ",(0,r.jsx)(n.code,{children:"google-services.json"})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Copy the downloaded file into ",(0,r.jsx)(n.code,{children:"android/app/"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Confirm the Gradle project is wired correctly:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"android/build.gradle"})," must include ",(0,r.jsx)(n.code,{children:"classpath 'com.google.gms:google-services:X.X.X'"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"android/app/build.gradle"})," must apply the plugin at the bottom:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gradle",children:'apply plugin: "com.google.gms.google-services"\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Rebuild the Android project so Gradle ingests the updated JSON."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"ios-native-configuration",children:"iOS Native Configuration"}),"\n",(0,r.jsxs)(n.h3,{id:"step-5-add-googleservice-infoplist-to-runner",children:["Step 5: Add ",(0,r.jsx)(n.code,{children:"GoogleService-Info.plist"})," to Runner"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Copy the plist into ",(0,r.jsx)(n.code,{children:"ios/Runner/"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.code,{children:"ios/Runner.xcworkspace"})," in Xcode."]}),"\n",(0,r.jsxs)(n.li,{children:["Drag the plist into the ",(0,r.jsx)(n.strong,{children:"Runner"})," target (check ",(0,r.jsx)(n.strong,{children:"Copy items if needed"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Verify it is listed under ",(0,r.jsx)(n.strong,{children:"Build Phases \u2192 Copy Bundle Resources"})," to ensure the file ships with the app."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-6-register-the-reversed-client-id-google-sign-in",children:"Step 6: Register the Reversed Client ID (Google Sign-In)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.code,{children:"GoogleService-Info.plist"})," and copy the ",(0,r.jsx)(n.code,{children:"REVERSED_CLIENT_ID"})," value (for example ",(0,r.jsx)(n.code,{children:"com.googleusercontent.apps.12345-abcdef"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["In Xcode \u2192 select the ",(0,r.jsx)(n.strong,{children:"Runner"})," target \u2192 ",(0,r.jsx)(n.strong,{children:"Info"})," tab \u2192 expand ",(0,r.jsx)(n.strong,{children:"URL Types"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"+"})," and fill in:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Identifier"}),": ",(0,r.jsx)(n.code,{children:"com.google"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"URL Schemes"}),": paste the ",(0,r.jsx)(n.code,{children:"REVERSED_CLIENT_ID"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Save to commit the change to ",(0,r.jsx)(n.code,{children:"ios/Runner/Info.plist"}),". The relevant block should look like:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<key>CFBundleURLTypes</key>\n<array>\n  <dict>\n    <key>CFBundleTypeRole</key>\n    <string>Editor</string>\n    <key>CFBundleURLSchemes</key>\n    <array>\n      <string>com.googleusercontent.apps.12345-abcdef</string>\n      \x3c!-- Other schemes such as deep links can follow --\x3e\n    </array>\n  </dict>\n</array>\n"})}),"\n","Without this entry, Google Sign-In cannot hand control back to your app after authentication."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-7-enable-apple-sign-in-capability",children:"Step 7: Enable Apple Sign-In Capability"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Sign in to ",(0,r.jsx)(n.a,{href:"https://developer.apple.com/account",children:"developer.apple.com"})," with the Team that matches your bundle ID and ensure the App ID has ",(0,r.jsx)(n.strong,{children:"Sign in with Apple"})," enabled. Download refreshed provisioning profiles if Apple prompts you."]}),"\n",(0,r.jsxs)(n.li,{children:["In Xcode \u2192 ",(0,r.jsx)(n.strong,{children:"Runner"})," target \u2192 ",(0,r.jsx)(n.strong,{children:"Signing & Capabilities"}),", click ",(0,r.jsx)(n.strong,{children:"+ Capability"}),", search for ",(0,r.jsx)(n.strong,{children:"Sign in with Apple"}),", and add it."]}),"\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.code,{children:"ios/Runner/Runner.entitlements"})," to confirm it contains:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<key>com.apple.developer.applesignin</key>\n<array>\n  <string>Default</string>\n</array>\n"})}),"\n","Keep this file under source control so teammates inherit the capability."]}),"\n",(0,r.jsx)(n.li,{children:"Build the app on a physical iOS device (iOS 13+) to verify the Apple Sign-In sheet appears and stays open."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);